# VS修改编码格式为UTF-8

1.  对于国内用户来说，大多设置 Windows 操作系统语言为简体中文(编码为 GBK 或 GB2312)，由此导致 Visual Studio2017 默认采用 GBK/GB2312 编码格式，其创建的项目文件(.cpp,.h 等)都采用 GBK/GB2312 编码，可能会给代码的移植性带来一点阻碍（主要是中文乱码），笔者就经常用 VS 运行 github 等的项目然后出现如下警告或者乱码：

    warning C4819: 该文件包含不能在当前代码页(936)中表示的字符。请将该文件保存为 Unicode 格式以防止数据丢失

2.  在此，建议统一使用 UTF-8（无 bom）编码格式，那么具体要怎么修改呢？

> 使用 VS2017 的“高级保存选项” 由于这个选项在 vs2017 中是默认隐藏的，需要手动调出来。具体操作方法如下：  
> 1、单击“工具”➡“自定义”，弹出“自定义”对话框。 2、单击“命令”标签 ➡ 进入“命令”选项卡。 3、“菜单栏”[下拉列表](https://so.csdn.net/so/search?q=%E4%B8%8B%E6%8B%89%E5%88%97%E8%A1%A8&spm=1001.2101.3001.7020)➡ 选择“文件”选项。  
> 4、单击“添加命令”➡ 弹出“添加命令”对话框。 5、在“类别”列表中，选择“文件”选项；在“命令”列表中，选择“高级保存选项”选项。  
> 6、单击“确定”按钮，关闭“添加命令”对话框。  
> 7、选中“控件”列表中的“高级保存选项”选项，单击“上移”或者“下移”按钮，可以调整该命令的位置。  
> 8、单击“关闭”按钮，完成“高级保存选项”命令的添加操作

3.  然后选中高级保存选项，弹出的对话框可以选择编码 utf-8

![在这里插入图片描述](https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/ead68cbfbfa1418ba4bf56d251bc5c2e.png)  
![在这里插入图片描述](https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/c4031ab7443b401a92579d963042ef09.png)

4.  使用 ForceUTF8 插件

> 工具 ➡ 拓展和更新 ➡ 联机 ➡ 搜索框输入“ForceUTF8”➡ 下载安装  
> 安装此插件后，所有文件均会以[utf-8 编码](https://so.csdn.net/so/search?q=utf-8%E7%BC%96%E7%A0%81&spm=1001.2101.3001.7020)格式保存，方便省心。

5.  最后非常重要的一步，那就是指定使用 utf-8 编译！

> 选中当前项目——右键属性——配置属性——C/C++——命令行——输入/utf-8 只有完成这一步，warning 信息才会真正消失。  
>
> ![在这里插入图片描述](https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/e52d26079b344d21a3bfef5d659cdf33.png)