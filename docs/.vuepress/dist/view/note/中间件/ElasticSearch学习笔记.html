<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.8" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>ElasticSearch学习笔记 | 不良人</title><meta name="description" content="My first VuePress Site">
    <link rel="preload" href="/assets/style-BV2aNBet.css" as="style"><link rel="stylesheet" href="/assets/style-BV2aNBet.css">
    <link rel="modulepreload" href="/assets/app-koVjN3rn.js"><link rel="modulepreload" href="/assets/ElasticSearch学习笔记.html-DsEReqEX.js">
    <link rel="prefetch" href="/assets/get-started.html-CWESbQWb.js" as="script"><link rel="prefetch" href="/assets/index.html-DkwUzXDe.js" as="script"><link rel="prefetch" href="/assets/C__实现微信自动跳一跳.html-CI9u4Zo1.js" as="script"><link rel="prefetch" href="/assets/C__手撸信号槽.html-DvpRdHU7.js" as="script"><link rel="prefetch" href="/assets/C__调用JS代码.html-CmUfTAIx.js" as="script"><link rel="prefetch" href="/assets/CloudFlare以及防DDOS策略详述.html-Dtu2Kn6x.js" as="script"><link rel="prefetch" href="/assets/Direct3D9入门绘制.html-CGN2i5ix.js" as="script"><link rel="prefetch" href="/assets/Dll调用内存bug解决.html-Drf_lFm-.js" as="script"><link rel="prefetch" href="/assets/NDK开发so调用so.html-DQU6YGwD.js" as="script"><link rel="prefetch" href="/assets/Onnxruntime Without Opencv.html-B0ftQV9N.js" as="script"><link rel="prefetch" href="/assets/OpenCv_CUDA实现Gpu加速.html-HfrZQykR.js" as="script"><link rel="prefetch" href="/assets/Surface使用体验与RD_frp搭建.html-Fb5b_5KS.js" as="script"><link rel="prefetch" href="/assets/TinyWebServer手撸记录.html-CXwnGyzW.js" as="script"><link rel="prefetch" href="/assets/Unity导出Sprite图片集.html-B4N8MwzX.js" as="script"><link rel="prefetch" href="/assets/X职通APP算法破解记录.html-D-6iSmYA.js" as="script"><link rel="prefetch" href="/assets/内层CALL追局部变量.html-CQnWIgsU.js" as="script"><link rel="prefetch" href="/assets/当Yolo成为外挂.html-DaP-wuXk.js" as="script"><link rel="prefetch" href="/assets/微信小程序逆向教程.html-SF3y3aWt.js" as="script"><link rel="prefetch" href="/assets/手机浏览器调试方法.html-DZzIYFsP.js" as="script"><link rel="prefetch" href="/assets/指定窗口句柄截图.html-BSsOp7q7.js" as="script"><link rel="prefetch" href="/assets/最低成本的方式搭建ChatGpt接口.html-C9GW4pbj.js" as="script"><link rel="prefetch" href="/assets/某付费文档网破解记录.html-UrZgaWqT.js" as="script"><link rel="prefetch" href="/assets/栈溢出漏洞分析.html-Bph30UK-.js" as="script"><link rel="prefetch" href="/assets/网游喊话加密Call分析.html-0-7OlI6c.js" as="script"><link rel="prefetch" href="/assets/网游链表数据遍历.html-DXWus2CR.js" as="script"><link rel="prefetch" href="/assets/index.html-CsdvkSxI.js" as="script"><link rel="prefetch" href="/assets/index.html-Dt5VxJYc.js" as="script"><link rel="prefetch" href="/assets/index.html-q4yb3btZ.js" as="script"><link rel="prefetch" href="/assets/index.html-wGb9bvUU.js" as="script"><link rel="prefetch" href="/assets/《第一行代码》学习笔记.html-BnsSEpt8.js" as="script"><link rel="prefetch" href="/assets/Linux服务器编程.html-CAmyYdV8.js" as="script"><link rel="prefetch" href="/assets/VS修改编码格式为UTF-8.html-bZUgWUV4.js" as="script"><link rel="prefetch" href="/assets/vs未能正确加载XX包的解决方法.html-COmpaA8t.js" as="script"><link rel="prefetch" href="/assets/易道云学习笔记.html-DyVlnlpv.js" as="script"><link rel="prefetch" href="/assets/Git学习笔记.html-D7J2b0NF.js" as="script"><link rel="prefetch" href="/assets/Java加密库的签名问题解决记录.html-CDqt4vWe.js" as="script"><link rel="prefetch" href="/assets/《疯狂JAVA讲义》学习笔记.html-BUnKU26K.js" as="script"><link rel="prefetch" href="/assets/动力节点NIO学习笔记.html-DGQe3fg6.js" as="script"><link rel="prefetch" href="/assets/SSH服务与VS连接失败解决方案.html-Kh8cFWSf.js" as="script"><link rel="prefetch" href="/assets/易道云-Linux系统命令.html-CxSxyn-A.js" as="script"><link rel="prefetch" href="/assets/狂神说Linux.html-BYLE9va-.js" as="script"><link rel="prefetch" href="/assets/Docker学习笔记.html-YPgoZBda.js" as="script"><link rel="prefetch" href="/assets/Docker部署前后端项目.html-CocXAf1W.js" as="script"><link rel="prefetch" href="/assets/Redis学习笔记.html-B2rs9_XL.js" as="script"><link rel="prefetch" href="/assets/CSDN转为Markdown.html-IUY_y1wY.js" as="script"><link rel="prefetch" href="/assets/栈溢出漏洞原理详解与利用.html-CpLk3Fzc.js" as="script"><link rel="prefetch" href="/assets/FridaHook学习笔记.html-DACchR4h.js" as="script"><link rel="prefetch" href="/assets/Windows Defender强制卸载.html-5fPZPF6c.js" as="script"><link rel="prefetch" href="/assets/404.html-B8yAn93Z.js" as="script"><link rel="prefetch" href="/assets/index.html-CeRcbTBX.js" as="script"><link rel="prefetch" href="/assets/Friend-C03PaQUN.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="logo" src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/b_9523abbb426ea0c8a21b2754fdc52300.jpg" alt="不良人"><span class="site-name can-hide" aria-hidden="true">不良人</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="学习"><span class="title">学习</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/view/note/" aria-label="学习笔记"><!--[--><!--]--> 学习笔记 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/view/pigeonhole/" aria-label="归档"><!--[--><!--]--> 归档 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/view/work/" aria-label="作品"><!--[--><!--]--> 作品 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/view/about/" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="学习"><span class="title">学习</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/view/note/" aria-label="学习笔记"><!--[--><!--]--> 学习笔记 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/view/pigeonhole/" aria-label="归档"><!--[--><!--]--> 归档 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/view/work/" aria-label="作品"><!--[--><!--]--> 作品 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/view/about/" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Android <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/Android/%E3%80%8A%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="《第一行代码》学习笔记"><!--[--><!--]--> 《第一行代码》学习笔记 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">C++ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/C__/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B.html" aria-label="Linux服务器编程"><!--[--><!--]--> Linux服务器编程 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/view/note/C__/VS%E4%BF%AE%E6%94%B9%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%E4%B8%BAUTF-8.html" aria-label="VS修改编码格式为UTF-8"><!--[--><!--]--> VS修改编码格式为UTF-8 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/view/note/C__/vs%E6%9C%AA%E8%83%BD%E6%AD%A3%E7%A1%AE%E5%8A%A0%E8%BD%BDXX%E5%8C%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html" aria-label="vs未能正确加载XX包的解决方法"><!--[--><!--]--> vs未能正确加载XX包的解决方法 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/view/note/C__/%E6%98%93%E9%81%93%E4%BA%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="易道云C/C++全栈工程师学习笔记"><!--[--><!--]--> 易道云C/C++全栈工程师学习笔记 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">C语言 <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Git <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/Git/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="Git基础教程"><!--[--><!--]--> Git基础教程 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Java <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/Java/Java%E5%8A%A0%E5%AF%86%E5%BA%93%E7%9A%84%E7%AD%BE%E5%90%8D%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E8%AE%B0%E5%BD%95.html" aria-label="Java加密库的签名问题解决记录"><!--[--><!--]--> Java加密库的签名问题解决记录 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/view/note/Java/%E3%80%8A%E7%96%AF%E7%8B%82JAVA%E8%AE%B2%E4%B9%89%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="《疯狂JAVA讲义》学习笔记"><!--[--><!--]--> 《疯狂JAVA讲义》学习笔记 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/view/note/Java/%E5%8A%A8%E5%8A%9B%E8%8A%82%E7%82%B9NIO%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="NIO学习笔记"><!--[--><!--]--> NIO学习笔记 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">JavaScript <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Linux <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/Linux/SSH%E6%9C%8D%E5%8A%A1%E4%B8%8EVS%E8%BF%9E%E6%8E%A5%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" aria-label="SSH服务与VS连接失败解决方案"><!--[--><!--]--> SSH服务与VS连接失败解决方案 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/view/note/Linux/%E6%98%93%E9%81%93%E4%BA%91-Linux%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4.html" aria-label="Linux系统精讲"><!--[--><!--]--> Linux系统精讲 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/view/note/Linux/%E7%8B%82%E7%A5%9E%E8%AF%B4Linux.html" aria-label="狂神说Linux"><!--[--><!--]--> 狂神说Linux <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Nodejs <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">PHP <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Python <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">React <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Rust <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Vue <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">中间件 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="Docker学习笔记"><!--[--><!--]--> Docker学习笔记 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/view/note/%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker%E9%83%A8%E7%BD%B2%E5%89%8D%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE.html" aria-label="Docker部署前后端"><!--[--><!--]--> Docker部署前后端 <!--[--><!--]--></a><!----></li><li><a class="route-link route-link-active sidebar-item active" href="/view/note/%E4%B8%AD%E9%97%B4%E4%BB%B6/ElasticSearch%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="ElasticSearch学习笔记"><!--[--><!--]--> ElasticSearch学习笔记 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#一、聊聊doug-cutting" aria-label="一、聊聊Doug Cutting"><!--[--><!--]--> 一、聊聊Doug Cutting <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#二、elasticsearch概述" aria-label="二、ElasticSearch概述"><!--[--><!--]--> 二、ElasticSearch概述 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#三、solr和elasticsearch的区别" aria-label="三、Solr和ElasticSearch的区别"><!--[--><!--]--> 三、Solr和ElasticSearch的区别 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#elasticsearch和solr区别总结" aria-label="ElasticSearch和Solr区别总结"><!--[--><!--]--> ElasticSearch和Solr区别总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/#四、elasticsearch安装" aria-label="四、ElasticSearch安装"><!--[--><!--]--> 四、ElasticSearch安装 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#windows下安装" aria-label="windows下安装"><!--[--><!--]--> windows下安装 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#安装es可视化界面-head的插件" aria-label="安装es可视化界面：head的插件"><!--[--><!--]--> 安装es可视化界面：head的插件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/#五、kibana安装" aria-label="五、Kibana安装"><!--[--><!--]--> 五、Kibana安装 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#了解elk" aria-label="了解ELK"><!--[--><!--]--> 了解ELK <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#kibana" aria-label="Kibana"><!--[--><!--]--> Kibana <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/#六、es的核心概念" aria-label="六、ES的核心概念"><!--[--><!--]--> 六、ES的核心概念 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#概述" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#关系行数据库和elasticsearch客观的对比" aria-label="关系行数据库和elasticsearch客观的对比"><!--[--><!--]--> 关系行数据库和elasticsearch客观的对比 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#物理设计" aria-label="物理设计"><!--[--><!--]--> 物理设计 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#逻辑设计" aria-label="逻辑设计"><!--[--><!--]--> 逻辑设计 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#物理设计-节点和分片如何工作" aria-label="物理设计：节点和分片如何工作"><!--[--><!--]--> 物理设计：节点和分片如何工作 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#倒排索引-面试题" aria-label="倒排索引（面试题）"><!--[--><!--]--> 倒排索引（面试题） <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/#七、ik分词器插件" aria-label="七、IK分词器插件"><!--[--><!--]--> 七、IK分词器插件 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#概念" aria-label="概念"><!--[--><!--]--> 概念 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#安装" aria-label="安装"><!--[--><!--]--> 安装 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#ik分词器增加自己的配置" aria-label="ik分词器增加自己的配置"><!--[--><!--]--> ik分词器增加自己的配置 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/#八、restful风格说明" aria-label="八、restful风格说明"><!--[--><!--]--> 八、restful风格说明 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#关于索引的基本操作" aria-label="关于索引的基本操作"><!--[--><!--]--> 关于索引的基本操作 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_2-关于文档的基本操作-重点" aria-label="2.关于文档的基本操作（重点）"><!--[--><!--]--> 2.关于文档的基本操作（重点） <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/#九、集成springboot" aria-label="九、集成SpringBoot"><!--[--><!--]--> 九、集成SpringBoot <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#_1-找到原生的依赖。" aria-label="1. 找到原生的依赖。"><!--[--><!--]--> 1. 找到原生的依赖。 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_2-找对象。" aria-label="2. 找对象。"><!--[--><!--]--> 2. 找对象。 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_3-分析这个类的方法。" aria-label="3. 分析这个类的方法。"><!--[--><!--]--> 3. 分析这个类的方法。 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/#十、集成springboot代码实现-7-6-1" aria-label="十、集成SpringBoot代码实现（7.6.1）"><!--[--><!--]--> 十、集成SpringBoot代码实现（7.6.1） <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#_1-导入依赖" aria-label="1.导入依赖"><!--[--><!--]--> 1.导入依赖 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_2-配置elasticsearch" aria-label="2.配置ElasticSearch"><!--[--><!--]--> 2.配置ElasticSearch <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_3-导入bean后-使用。" aria-label="3.导入bean后，使用。"><!--[--><!--]--> 3.导入bean后，使用。 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/#十一、具体的api测试" aria-label="十一、具体的api测试"><!--[--><!--]--> 十一、具体的api测试 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#_1、创建索引" aria-label="1、创建索引"><!--[--><!--]--> 1、创建索引 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_2、判断索引是否存在" aria-label="2、判断索引是否存在"><!--[--><!--]--> 2、判断索引是否存在 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_3、删除索引" aria-label="3、删除索引"><!--[--><!--]--> 3、删除索引 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_4、添加文档" aria-label="4、添加文档"><!--[--><!--]--> 4、添加文档 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_5、判断文档是否存在" aria-label="5、判断文档是否存在"><!--[--><!--]--> 5、判断文档是否存在 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_6、获取文档的信息" aria-label="6、获取文档的信息"><!--[--><!--]--> 6、获取文档的信息 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_7、更新文档的信息" aria-label="7、更新文档的信息"><!--[--><!--]--> 7、更新文档的信息 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_8、删除文档信息" aria-label="8、删除文档信息"><!--[--><!--]--> 8、删除文档信息 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_9、批量插入数据" aria-label="9、批量插入数据"><!--[--><!--]--> 9、批量插入数据 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#_10、查询" aria-label="10、查询"><!--[--><!--]--> 10、查询 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/view/note/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="Redis学习笔记"><!--[--><!--]--> Redis学习笔记 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">其他 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/%E5%85%B6%E4%BB%96/CSDN%E8%BD%AC%E4%B8%BAMarkdown.html" aria-label="CSDN转为Markdown"><!--[--><!--]--> CSDN转为Markdown <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">反汇编 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/%E5%8F%8D%E6%B1%87%E7%BC%96/%E6%A0%88%E6%BA%A2%E5%87%BA%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%88%A9%E7%94%A8.html" aria-label="栈溢出漏洞原理详解与利用"><!--[--><!--]--> 栈溢出漏洞原理详解与利用 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">安卓逆向 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/%E5%AE%89%E5%8D%93%E9%80%86%E5%90%91/FridaHook%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="FridaHook"><!--[--><!--]--> FridaHook <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">易语言 <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">算法 <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">系统 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/view/note/%E7%B3%BB%E7%BB%9F/Windows%20Defender%E5%BC%BA%E5%88%B6%E5%8D%B8%E8%BD%BD.html" aria-label="Windows Defender强制卸载"><!--[--><!--]--> Windows Defender强制卸载 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">网页逆向 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="elasticsearch学习笔记" tabindex="-1"><a class="header-anchor" href="#elasticsearch学习笔记"><span>ElasticSearch学习笔记</span></a></h1><h2 id="一、聊聊doug-cutting" tabindex="-1"><a class="header-anchor" href="#一、聊聊doug-cutting"><span>一、聊聊Doug Cutting</span></a></h2><p>一位名叫Doug Cutting的美国工程师，做了一个用于文本搜索的函数库（姑且理解为软件的功能组件），命名为Lucene。 Lucene是用JAVA写成的，目的是为各种中小型应用软件加入全文检索功能。因为好用而且开源（代码公开），非常受程序员们的欢迎！</p><blockquote><p>回到主题</p></blockquote><p>Lucene是一套<strong>信息检索工具包</strong>！jar包！<strong>不包含</strong>搜索引擎系统！ 包含的：索引结构！读写索引的工具！排序、搜索规则等功能（工具类！） Lucene和Elasticsearch关系：ElasticSearch是基于Lucene做了一些封装和增强（我们上手是十分简单！）</p><h2 id="二、elasticsearch概述" tabindex="-1"><a class="header-anchor" href="#二、elasticsearch概述"><span>二、ElasticSearch概述</span></a></h2><p>ElasticSearch(简称为es)是一个开源的<strong>高扩展</strong>的<strong>分布式全文检索引擎</strong>，它可以近乎 <strong>实时存储、检索数据</strong>； 本身扩展性很好，可以扩展到上百台服务器，处理PB级别（大数据时代）的数据。 es是使用java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的<strong>REST-ful</strong>的API来隐藏Lucene的复杂性，从而让全文搜索变得简单。</p><h2 id="三、solr和elasticsearch的区别" tabindex="-1"><a class="header-anchor" href="#三、solr和elasticsearch的区别"><span>三、Solr和ElasticSearch的区别</span></a></h2><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyeb6cf94e-e6fe-4351-bfa0-e0365eed5646.png" alt="img"><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyfb3ca458-82d1-4a0e-b8bd-8c39b252901b.png" alt="img"><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyee3bb195-d2ff-4b64-9cad-9025b8838fd7.png" alt="img"><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudycb6bdfec-ea1d-4185-9aa4-91c92e49d712.png" alt="img"></p><h3 id="elasticsearch和solr区别总结" tabindex="-1"><a class="header-anchor" href="#elasticsearch和solr区别总结"><span>ElasticSearch和Solr区别总结</span></a></h3><ol><li>es基本是开箱即用（解压就可以用），非常简单。Solr安装略微复杂一丢丢。</li><li>Solr利用Zookeeper进行分布式管理，而Elasticsearch自身带有分布式协调管理功能。</li><li>Solr支持更多格式的数据，比JSON、XML、CSV，而Elasticsearch仅支持json文件格式。</li><li>Solr官方提供的功能更多，而Elasticsearch本身更注重于核心功能，高级功能多有第三方插件提供，例如图形化界面需要kibana友好支撑。</li><li>Solr查询快，但更新索引时慢（即插入删除慢），用于电商等查询多的应用； <ul><li>ES建立索引快（即查询慢），即实时性查询快，用于facebook新浪等搜索。</li><li>Solr是传统搜索应用的有力解决方案，但Elasticsearch更适用于新兴的实时搜索应用。</li></ul></li><li>Solr比较成熟，有一个更大，更成熟的用户、开发和贡献者社区，而Elasticsearch相对开发维护者较少，更新太快，学习使用成本较高。</li></ol><h2 id="四、elasticsearch安装" tabindex="-1"><a class="header-anchor" href="#四、elasticsearch安装"><span>四、ElasticSearch安装</span></a></h2><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>最低要求jdk1.8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>最新版本下载地址：https://www.elastic.co/cn/downloads/enterprise-search</p><p>其他版本下载地址：https://www.elastic.co/cn/downloads/past-releases#elasticsearch</p><h3 id="windows下安装" tabindex="-1"><a class="header-anchor" href="#windows下安装"><span>windows下安装</span></a></h3><p>解决问题：http://www.javacui.com/tool/669.html</p><ol><li><p>解压就可以使用了 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyb82dbac7-9dc6-4000-ac28-d7e1bb8d685d.png" alt="img"></p></li><li><p>熟悉目录</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>bin：启动文件
config：配置文件     
log4j2：日志配置文件     
jvm<span class="token punctuation">.</span>options：java虚拟机相关的配置     
elasticsearch<span class="token punctuation">.</span>yml：elasticsearch的配置文件！默认<span class="token number">9200</span>端口！跨域！
lib：相关jar包
logs：日志
modules：功能模块
plugins：插件！
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>启动（点击bin文件夹下的elasticsearch.bat），访问9200端口 访问可能会报错或需要输入密码，启动前需要配置elasticsearch.yml： <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyf8f9e334-a9c0-449e-81db-ede59c0255e3.jpg" alt="img"></p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># 启动时会去更新地图的一些数据库，这里直接禁掉即可，用到时再说.ingest.geoip.downloader.enabled: false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy75ec1563-4b52-4b35-8774-df7b2bb4485e.png" alt="img"></p></li><li><p>访问测试（localhost:9200） <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy1ee4d3cc-0620-41fe-bfce-8b90dfbd53e3.png" alt="img"></p></li></ol><h3 id="安装es可视化界面-head的插件" tabindex="-1"><a class="header-anchor" href="#安装es可视化界面-head的插件"><span>安装es可视化界面：head的插件</span></a></h3><p>没有前端基础的，先去看狂神的Vue教程，把基本的环境安装完毕！ 狂神Vue教程地址：https://www.bilibili.com/video/BV18E411a7mC</p><ol><li><p>head插件下载地址：https://github.com/mobz/elasticsearch-head/</p></li><li><p>启动head插件，访问9100端口</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># 安装cnpm的命令npm install -g cnpm -registry=https://registry.npm.taobao.org# cnpm下载资源更快cnpm installnpm run start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果cnpm不能使用，需要设置：</p><ol><li>windows系统搜索Windows PowerShell，以管理员的权限打开。</li><li>输入set-ExecutionPolicy RemoteSigned，点击回车。</li><li>输入A（选择A），回车。</li><li>重新回到项目就可以使用cnpm密令。</li></ol></li><li><p>连接测试发现跨域问题 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy5a8b4c14-cded-4a3f-9034-6d23a13e201e.png" alt="img"></p></li><li><p>配置es的elasticsearch.yml文件解决跨域问题</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>http.cors.enabled: truehttp.cors.allow-origin: &quot;*&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>重启es服务，再次连接（访问9100端口）成功 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy75d81340-dee5-4547-bcae-f3e91562c8a9.png" alt="img"> 初学，就把es当做一个数据库！（可以建立索引（库），文档（库中的数据！）)</p></li></ol><blockquote><p>这个head我们就把它当做数据展示工具！(我们后面所有的查询，可以使用Kibana做)。</p></blockquote><h2 id="五、kibana安装" tabindex="-1"><a class="header-anchor" href="#五、kibana安装"><span>五、Kibana安装</span></a></h2><h3 id="了解elk" tabindex="-1"><a class="header-anchor" href="#了解elk"><span>了解ELK</span></a></h3><p>ELK是Elasticsearch、Logstash、Kibana三大开源框架首字母大写简称。市面上也被成为Elastic Stack。其中Elasticsearch是一个基于Lucene、分布式、通过Restful方式进行交互的近实时搜索平台框架。像类似百度、谷歌这种大数据全文搜索引擎的场景都可以使用Elasticsearch作为底层支持框架，可见Elasticsearch提供的搜索能力确实强大，市面上很多时候我们简称Elasticsearch为es。 Logstash是ELK的<strong>中央数据流引擎</strong>，用于从不同目标（文件/数据存储/MQ）收集的不同格式数据，经过过滤后支持输出到不同目的地（文件/MQ/redis/elasticsearch/kafka等）。Kibana可以将elasticsearch的数据通过友好的页面展示出来，提供实时分析的功能。 市面上很多开发只要提到ELK能够一致说出它是一个<strong>日志分析架构技术栈</strong>总称，但实际上ELK不仅仅适用于日志分析，它还可以支持其它任何数据分析和收集的场景，日志分析和收集只是更具有代表性，并非唯一性。 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudycf2d1011-9222-4722-99ed-c7dae3304892.png" alt="img"></p><h3 id="kibana" tabindex="-1"><a class="header-anchor" href="#kibana"><span>Kibana</span></a></h3><p>Kibana是一个针对Elasticsearch的<strong>开源分析及可视化平台</strong>，用来搜索、查看交互存储在Elasticsearch索引中的数据。使用Kibana，可以通过各种图表进行高级数据分析及展示。Kibana让海量数据更容易理解。它操作简单，基于浏览器的用户界面可以<strong>快速创建仪表板</strong>（dashboard）<strong>实时显示</strong>Elasticsearch查询动态。设置Kibana非常简单。无需编码或者额外的基础架构，几分钟内就可以完成Kibana安装并启动Elasticsearch索引监测。 官网：https://www.elastic.co/cn/kibana/</p><blockquote><p>Kibana要和ES版本一致！！！</p></blockquote><ol><li><p>解压目录 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudycf6c22ab-7b95-4016-8759-a681bbe7e3d8.png" alt="img"></p></li><li><p>启动测试（/bin/Kibana.bat） <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyc31cbfbb-6329-4e65-9553-ba31162d483f.png" alt="img"></p></li><li><p>访问测试，端口号5601 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy7de0e9d3-0b77-426c-a98e-2550f3a49bc8.png" alt="img"></p></li><li><p>开发工具 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudye16a6589-579c-4584-aadf-d107b20b4db8.png" alt="img"> 我们之后的所有操作都在这里进行编写！</p></li><li><p>汉化</p><p>自己修改/config/Kibana.yml文件，添加i18n.locale: “zh-CN”，重启Kibana。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>i18n.locale: &quot;zh-CN&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="六、es的核心概念" tabindex="-1"><a class="header-anchor" href="#六、es的核心概念"><span>六、ES的核心概念</span></a></h2><ol><li>索引</li><li>字段类型（mapping）</li><li>文档(documents)</li></ol><h3 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h3><p>在前面的学习中，我们已经掌握了es是什么，同时也把es的服务已经安装启动，那么es是如何去存储数据，数据结构是什么，又是如何实现搜索的呢？ 我们先来聊聊ElasticSearch的相关概念吧！</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>集群，节点，索引，类型，文档，分片，映射是什么？
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="关系行数据库和elasticsearch客观的对比" tabindex="-1"><a class="header-anchor" href="#关系行数据库和elasticsearch客观的对比"><span>关系行数据库和elasticsearch客观的对比</span></a></h3><p>elasticsearch面向文档</p><table><thead><tr><th style="text-align:left;">Relational DB</th><th style="text-align:left;">ElasticSearch</th></tr></thead><tbody><tr><td style="text-align:left;">数据库(database)</td><td style="text-align:left;">索引(indices)</td></tr><tr><td style="text-align:left;">表(tables)</td><td style="text-align:left;">types</td></tr><tr><td style="text-align:left;">行(rows)</td><td style="text-align:left;">documents</td></tr><tr><td style="text-align:left;">字段(columns)</td><td style="text-align:left;">fields</td></tr></tbody></table><p>elasticsearch(集群)中可以包含多个索引(数据库)，每个索引中可以包含多个类型(表)，每个类型下又包含多个文档(行)，每个文档中又包含多个字段(列)。</p><h3 id="物理设计" tabindex="-1"><a class="header-anchor" href="#物理设计"><span>物理设计</span></a></h3><p>elasticsearch在后台把每个索引划分成多个分片，每个分片可以在集群中的不同服务器间迁移！ 一个人就是一个集群！默认的集群名elasticsearch <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyfdd52e7e-f425-4b4c-b494-28d02bbeb705.png" alt="img"></p><h3 id="逻辑设计" tabindex="-1"><a class="header-anchor" href="#逻辑设计"><span>逻辑设计</span></a></h3><p>一个索引类型中，包含多个文档，比如说文档1、文档2。当我们索引一篇文档时，可以通过这样的一个顺序找到它：索引&gt;类型&gt;文档ID，通过这个组合我们就能索引到某个具体的文档。 注意：ID不必是整数，实际上它是个字符串。</p><ol><li>文档 之前说elasticsearch是面向文档的，那么就意味着索引和搜索数据的最小单位是文档，elasticsearch中，文档有几个重要属性：</li></ol><ul><li><strong>自我包含</strong>：一篇文档同时包含字段和对应的值，也就是同时包含 key:value！</li><li><strong>可以是层次型的</strong>：一个文档中包含自文档，复杂的逻辑实体就是这么来的！（<strong>就是一个json对象</strong>，fastjson进行自动转换）</li><li><strong>灵活的结构</strong>：文档不依赖预先定义的模式，我们知道关系型数据库中，要提前定义字段才能使用，在elasticsearch中，对于字段是非常灵活的，有时候，我们可以忽略该字段，或者动态的添加一个新的字段。 尽管我们可以随意的新增或者忽略某个字段，但是，每个字段的类型非常重要，比如一个年龄字段类型，可以是字符串也可以是整形。因为elasticsearch会保存字段和类型之间的映射及其他的设置。这种映射具体到每个映射的每种类型，这也是为什么在elasticsearch中，类型有时候也称为映射类型。</li></ul><ol><li>类型 类型是文档的逻辑容器，就像关系型数据库一样，表格是行的容器。类型中对于字段的定义称为映射，比如name映射为字符串类型。我们说文档是无模式的，它们不需要拥有映射中所定义的所有字段，比如新增一个字段，那么elasticsearch是怎么做的呢？ elasticsearch会自动的将新字段加入映射，但是这个字段的不确定它是什么类型，elasticsearch就开始猜，如果这个值是18，那么elasticsearch会认为它是整形。但是elasticsearch也可能猜不对，所以最安全的方式就是提前定义好所需要的映射，这点跟关系型数据库殊途同归了，先定义好字段，然后再使用，别整什么么蛾子。</li><li>索引（就是数据库） 索引是映射类型的容器，elasticsearch中的索引是一个非常大的文档集合。索引存储了映射类型的字段和其他设置。然后它们被存储到了各个分片上了。我们来研究下分片是如何工作的。</li></ol><h3 id="物理设计-节点和分片如何工作" tabindex="-1"><a class="header-anchor" href="#物理设计-节点和分片如何工作"><span>物理设计：节点和分片如何工作</span></a></h3><p>一个集群至少有一个节点，而一个节点就是一个elasricsearch进程，节点可以有多个索引默认的，如果你创建索引，那么索引将会有个5个分片（primary shard，又称主分片）构成的，每一个主分片会有一个副本（replica shard，又称复制分片） <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy9957cdf4-ed03-497d-b701-9082b6e8d78a.png" alt="img"> 上图是一个有3个节点的集群，可以看到主分片和对应的复制分片都不会在同一个节点内，这样有利于某个节点挂掉了，数据也不至于丢失。实际上，一个分片是一个Lucene索引，一个包含<strong>倒排索引</strong>的文件目录，倒排索引的结构使得elasticsearch在不扫描全部文档的情况下，就能告诉你哪些文档包含特定的关键字。不过，等等，倒排索引是什么鬼？</p><h3 id="倒排索引-面试题" tabindex="-1"><a class="header-anchor" href="#倒排索引-面试题"><span>倒排索引（面试题）</span></a></h3><p>elasticsearch使用的是一种称为倒排索引的结构，采用Lucene倒排索作为底层。这种结构适用于快速的全文搜索，一个索引由文档中所有不重复的列表构成，对于每一个词，都有一个包含它的文档列表。例如，现在有两个文档，每个文档包含如下内容：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>study every day，good good up to forever #文档1包含的内容To forever，study every day，good good up #文档2包含的内容
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>为了创建倒排索引，我们首先要将每个文档拆分成独立的词（或称为词条或者tokens），然后创建一个包含所有不重复的词条的排序列表，然后列出每个词条出现在哪个文档：</p><table><thead><tr><th style="text-align:left;">term</th><th style="text-align:left;">doc_1</th><th style="text-align:left;">doc_2</th></tr></thead><tbody><tr><td style="text-align:left;">Study</td><td style="text-align:left;">有</td><td style="text-align:left;">无</td></tr><tr><td style="text-align:left;">To</td><td style="text-align:left;">无</td><td style="text-align:left;">无</td></tr><tr><td style="text-align:left;">every</td><td style="text-align:left;">有</td><td style="text-align:left;">有</td></tr><tr><td style="text-align:left;">forever</td><td style="text-align:left;">有</td><td style="text-align:left;">有</td></tr><tr><td style="text-align:left;">day</td><td style="text-align:left;">有</td><td style="text-align:left;">有</td></tr><tr><td style="text-align:left;">study</td><td style="text-align:left;">无</td><td style="text-align:left;">有</td></tr><tr><td style="text-align:left;">good</td><td style="text-align:left;">有</td><td style="text-align:left;">有</td></tr><tr><td style="text-align:left;">every</td><td style="text-align:left;">有</td><td style="text-align:left;">有</td></tr><tr><td style="text-align:left;">to</td><td style="text-align:left;">有</td><td style="text-align:left;">无</td></tr><tr><td style="text-align:left;">up</td><td style="text-align:left;">有</td><td style="text-align:left;">有</td></tr></tbody></table><p>现在，我们试图搜索to forever，只需要查看包含每个词条的文档。权重score</p><table><thead><tr><th style="text-align:left;">term</th><th style="text-align:left;">doc_1</th><th style="text-align:left;">doc_2</th></tr></thead><tbody><tr><td style="text-align:left;">to</td><td style="text-align:left;">有</td><td style="text-align:left;">无</td></tr><tr><td style="text-align:left;">forever</td><td style="text-align:left;">有</td><td style="text-align:left;">有</td></tr><tr><td style="text-align:left;">total</td><td style="text-align:left;">2</td><td style="text-align:left;">1</td></tr></tbody></table><p>两个文档都匹配，但是第一个文档比第二个匹配程度更高。如果没有别的条件，现在，这两个包含关键字的文档都将返回。 再来看一个示例，比如我们通过博客标签来搜索博客文章。那么倒排索引列表就是这样的一个结构： <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy02773fa3-3dff-436b-8ddc-226b75937319.png" alt="img"> 如果要搜索含有 python标签的文章，那相对于查找所有原始数据而言，查找倒排索引后的数据将会快的多。只需要查看标签这一栏，然后获取相关的文章ID即可。 elasticsearch的索引和Lucene的索引对比： 在elasticsearch中，索引这个词被频繁使用，这就是术语的使用。在elasticsearch中，索引被分为多个分片，每份分片是一个Lucene的索引。所以一个elasticsearch索引是由多个Lucene索引组成的。别问为什么，谁让elasticsearch使用Lucene作为底层呢！ 如无特指，说起索引都是指elasticsearch的索引。 接下来的一切操作都在kibana中Dev Tools下的Console里完成。基础操作！</p><h2 id="七、ik分词器插件" tabindex="-1"><a class="header-anchor" href="#七、ik分词器插件"><span>七、IK分词器插件</span></a></h2><h3 id="概念" tabindex="-1"><a class="header-anchor" href="#概念"><span>概念</span></a></h3><p>分词：即把一段中文或者别的划分成一个个的关键字，我们在搜索时候会把自己的信息进行分词，会把数据库中或者索引库中的数据进行分词，然后进行一个匹配操作，默认的中文分词是将每个字看成一个词，比如“我爱狂神”会被分为“我””爱”，“狂”，”神”，这显然是不符合要求的，所以我们需要安装中文分词器ik来解决这个问题。 ik提供了两个分词算法：ik_smart和ik_max_word，其中ik_smart为最少切分，ik_max_word为最细粒度划分！一会我们测试！</p><blockquote><p>如果要使用中文，建议使用IK分词器</p></blockquote><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><ol><li>下载地址：https://github.com/medcl/elasticsearch-analysis-ik/releases</li><li>下载完成之后，解压放在elasticsearch的plugins文件下 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy946c5a48-fabe-4f63-b5e2-d48d734f2a44.png" alt="img"></li><li>重启，观察ES <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy1ebed575-ebeb-491c-965c-94ae85f36898.jpg" alt="img"></li><li>可以通过elasticsearch-plugin这个命令来查看加载进来的插件。 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy38eb7901-74a3-45b2-8d09-63624b817ffd.jpg" alt="img"></li><li>使用kibana测试。（查看不同分词效果） <code>其中ik_smart为最少切分</code><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy561f9ca9-d069-4866-80be-4ed65cc117b7.jpg" alt="img"><code>ik_max_word为最细粒度划分（穷尽词库）</code><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy6b8d0117-d557-4ccc-b894-bb38c345cefa.jpg" alt="img"></li></ol><p>当我们输入”超级喜欢狂神说java”，发现问题：狂神说，被拆开了。 这种自己需要的词，需要自己加到我们的分词器的字典中。 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy3931f1ef-a564-4fc2-bfed-d59c99481760.jpg" alt="img"></p><h3 id="ik分词器增加自己的配置" tabindex="-1"><a class="header-anchor" href="#ik分词器增加自己的配置"><span>ik分词器增加自己的配置</span></a></h3><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy98044f93-86c4-46c6-a0aa-efeb7904c24d.jpg" alt="img"></p><ol><li><p>自定义配置。</p></li><li><p>把自定义配置添加到扩展配置中去。</p></li><li><p>重启ES（看细节：如下图）。 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyfd7a77c4-2a71-4b8c-90c0-d9d435f08954.jpg" alt="img"></p></li><li><p>重启kibana。</p></li><li><p>再次测试下，输入”超级喜欢狂神说java”，看下效果。 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyad4f675e-d79d-4800-9716-53e1b0fee9df.jpg" alt="img"></p><p><strong>以后的话，我们需要自己配置分词就在自己定义的dic文件中进行配置即可！|</strong></p></li></ol><h2 id="八、restful风格说明" tabindex="-1"><a class="header-anchor" href="#八、restful风格说明"><span>八、restful风格说明</span></a></h2><p>一种软件架构风格，而不是标准，只是提供了一组设计原则和约束条件。它主要用于客户端和服务器交互类的软件。基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存等机制。</p><p>基本rest说明：</p><table><thead><tr><th style="text-align:center;">method</th><th style="text-align:center;">url地址</th><th style="text-align:center;">描述</th></tr></thead><tbody><tr><td style="text-align:center;">PUT</td><td style="text-align:center;">localhost:9200/索引名称/类型名称/文档id</td><td style="text-align:center;">创建文档（指定文档id）</td></tr><tr><td style="text-align:center;">POST</td><td style="text-align:center;">localhost:9200/索引名称/类型名称</td><td style="text-align:center;">创建文档（随机文档id）</td></tr><tr><td style="text-align:center;">POST</td><td style="text-align:center;">localhost:9200/索引名称/类型名称/文档id/_update</td><td style="text-align:center;">修改文档</td></tr><tr><td style="text-align:center;">DELETE</td><td style="text-align:center;">localhost:9200/索引名称/类型名称/文档id</td><td style="text-align:center;">删除文档</td></tr><tr><td style="text-align:center;">GET</td><td style="text-align:center;">localhost:9200/索引名称/类型名称/文档id</td><td style="text-align:center;">查询文档通过文档id</td></tr><tr><td style="text-align:center;">POST</td><td style="text-align:center;">localhost:9200/索引名称/类型名称/_search</td><td style="text-align:center;">查询所有数据</td></tr></tbody></table><h3 id="关于索引的基本操作" tabindex="-1"><a class="header-anchor" href="#关于索引的基本操作"><span>关于索引的基本操作</span></a></h3><h4 id="创建一个索引。" tabindex="-1"><a class="header-anchor" href="#创建一个索引。"><span>创建一个索引。</span></a></h4><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code># ElasticSearch的7.x.x版本
PUT /索引名/类型名/文档id
{
    请求体
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy6affdfb4-ac90-4229-b4fb-399bace0b84f.jpg" alt=""></p><div class="language-HTML line-numbers-mode" data-ext="HTML" data-title="HTML"><pre class="language-HTML"><code># ElasticSearch的8.x.x版本，类型已经弃用，默认写_doc。
PUT /索引名/_doc/文档id
{
    请求体
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudye50e4f7c-4d18-42c8-bf83-7ec8f58add8b.jpg" alt="img"></p><p>name这个字段需要指定类型吗？需要（毕竟我们关系型数据库是需要指定类型的）</p><div class="language-te line-numbers-mode" data-ext="te" data-title="te"><pre class="language-te"><code>官网类型文档地址：https://www.elastic.co/guide/en/elasticsearch/reference/current/keyword.html
- 字符串类型text、keyword
- 数值类型long，integer，short，byte，double，float，half float，scaled float
- 日期类型date
- 布尔值类型boolean·
- 二进制类型binary
- 等等……
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="指定字段类型" tabindex="-1"><a class="header-anchor" href="#指定字段类型"><span>指定字段类型</span></a></h4><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy4db5a23e-ff3f-477f-b1a6-a3ee709c8de5.jpg" alt="img"> 获得这个规则（可以通过GET请求获取具体的信息） <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyd0c9a72f-7422-4312-b3ae-a8014702708a.jpg" alt="img"></p><h4 id="查看默认信息。" tabindex="-1"><a class="header-anchor" href="#查看默认信息。"><span>查看默认信息。</span></a></h4><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyba90200b-366d-4dde-a2d1-bb94f974f04a.jpg" alt="img"></p><p>如果自己的文档字段没有指定，那么es就会给我们默认配置字段类型！</p><p>扩展：通过命令elasticsearch索引情况！（通过get_cat/可以获得es的当前的很多信息！）</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>GET _cat/health      # 查看健康值GET _cat/indices?v  #查看所有东西的版本信息
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy78620e11-6059-4526-a54f-ce69ee36df6d.jpg" alt="img"></p><h4 id="修改" tabindex="-1"><a class="header-anchor" href="#修改"><span>修改</span></a></h4><blockquote><p>提交，使用PUT，覆盖（弊端：如果漏掉一个字段，那么字段的值就没了）</p></blockquote><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy57ca4be4-3c5d-4922-b0cb-2b1f2d37baa9.jpg" alt="img"></p><blockquote><p>新的修改方法：使用post提交（7.x.x版本和8.x.x版本提交方式不一样）</p></blockquote><p><code>7.x.x版本（7.6.1）</code><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy3369c222-a074-4ec0-973e-9555e7d5b4b4.jpg" alt="img"></p><p><code>8.x.x版本（8.2.3）</code><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy89491543-d2b2-4593-b76e-9d763a8e864f.jpg" alt="img"></p><h4 id="删除" tabindex="-1"><a class="header-anchor" href="#删除"><span>删除</span></a></h4><p>通过DELETE命令实现删除、根据你的请求来判断是删除索引还是删除文档记录！ 使用RESTFUL风格是我们ES推荐大家使用的！ <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy2d1a8eaa-6ed5-4c1a-9fdd-8d2a4fb31e1b.jpg" alt="img"></p><h3 id="_2-关于文档的基本操作-重点" tabindex="-1"><a class="header-anchor" href="#_2-关于文档的基本操作-重点"><span>2.关于文档的基本操作（重点）</span></a></h3><h4 id="_2-1-基本操作-增删改查回顾" tabindex="-1"><a class="header-anchor" href="#_2-1-基本操作-增删改查回顾"><span>2.1 基本操作（增删改查回顾）</span></a></h4><h5 id="添加数据" tabindex="-1"><a class="header-anchor" href="#添加数据"><span>添加数据</span></a></h5><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token constant">PUT</span> <span class="token operator">/</span>kuangshen<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">{</span>  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;狂神说&quot;</span><span class="token punctuation">,</span>  <span class="token string">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token string">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;工资2500&quot;</span><span class="token punctuation">,</span>  <span class="token string">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;直男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;温暖&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;技术宅&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token constant">PUT</span> <span class="token operator">/</span>kuangshen<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">{</span>  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>  <span class="token string">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>  <span class="token string">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;没有工资&quot;</span><span class="token punctuation">,</span>  <span class="token string">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;渣男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;旅游&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;交友&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy5447bdf1-49f4-47ec-bb87-3b3a020b724d.png" alt="img"></p><h5 id="查询数据" tabindex="-1"><a class="header-anchor" href="#查询数据"><span>查询数据</span></a></h5><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token constant">GET</span> <span class="token operator">/</span>kuangshen<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span><span class="token constant">GET</span> <span class="token operator">/</span>kuangshen<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="更新-put" tabindex="-1"><a class="header-anchor" href="#更新-put"><span>更新 PUT</span></a></h5><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token constant">PUT</span> <span class="token operator">/</span>kuangshen<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">{</span>  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;狂神说123&quot;</span><span class="token punctuation">,</span>  <span class="token string">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token string">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;工资2500&quot;</span><span class="token punctuation">,</span>  <span class="token string">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;直男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;温暖&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;技术宅&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="更新-post" tabindex="-1"><a class="header-anchor" href="#更新-post"><span>更新 POST</span></a></h5><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token constant">POST</span> <span class="token operator">/</span>kuangshen<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">{</span> <span class="token string">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;狂神说123&quot;</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-2-简单操作-条件查询" tabindex="-1"><a class="header-anchor" href="#_2-2-简单操作-条件查询"><span>2.2 简单操作（条件查询）</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// 支持模糊查询GET /kuangshen/_search?q=name:狂神说</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyad57e572-a951-4e60-8aa6-c27a636bc5be.jpg" alt="img"></p><h4 id="_2-3-复杂操作" tabindex="-1"><a class="header-anchor" href="#_2-3-复杂操作"><span>2.3 复杂操作</span></a></h4><p>（查询select：排序，分页，高亮，模糊查询，精准查询）</p><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyc583459c-4b7d-48ef-9a95-8a29be179027.png" alt="img"><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyd76e7ec9-1db9-4e78-a827-d1dfa638ae13.jpg" alt="img"></p><h5 id="过滤字段查询" tabindex="-1"><a class="header-anchor" href="#过滤字段查询"><span>过滤字段查询</span></a></h5><p>（输出结果，不需要很多）：(我们之后使用java操作es，所有的方法和对象就是这里面的key！)</p><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudybb1cdc3e-53b7-424b-b606-4bf15e2781dc.png" alt="img"></p><h5 id="排序查询" tabindex="-1"><a class="header-anchor" href="#排序查询"><span>排序查询：</span></a></h5><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy3ed9fc6e-6612-4aa1-b98a-f6e05afb595f.jpg" alt="img"></p><h5 id="分页查询" tabindex="-1"><a class="header-anchor" href="#分页查询"><span>分页查询：</span></a></h5><p>（数据索引下标还是从0开始）</p><p>GET /kuangshen/_search/{currentPage}/{pageSize} <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy9ab19e7c-1343-4187-9457-a76b901730e5.png" alt="img"></p><h5 id="布尔值查询" tabindex="-1"><a class="header-anchor" href="#布尔值查询"><span>布尔值查询：</span></a></h5><p>must （and），所有的条件都要符合 where id=1 and name=xxx <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy4ada5a5b-7228-4c5a-8236-52dcff04934b.jpg" alt="img"> should（or），所有的条件都要符合 where id=1 or name=xxx <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy18b8ef97-95da-49e5-99bb-062772bc7784.jpg" alt="img"> must_not (not) <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy3a0e76da-a0f7-4746-ac20-f715c25fd6b1.jpg" alt="img"></p><h5 id="filter查询过滤" tabindex="-1"><a class="header-anchor" href="#filter查询过滤"><span>filter查询过滤：</span></a></h5><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy539540d8-ef19-46a1-a7f7-316570dd6c3d.png" alt="img"></p><h5 id="匹配多个条件" tabindex="-1"><a class="header-anchor" href="#匹配多个条件"><span>匹配多个条件：</span></a></h5><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy9cc8f263-a735-444a-aa33-dc85866a4bd2.png" alt="img"></p><h5 id="精确查询" tabindex="-1"><a class="header-anchor" href="#精确查询"><span>精确查询：</span></a></h5><p>（term 查询是直接通过倒排索引指定的词条进程精确的查找的！） 关于分词：</p><ul><li>term：直接查询精确的。（两种情况：text、keyword）</li><li>match：会使用分词器解析！（先分析文档，然后在通过分析的文档进行查询！）</li></ul><ol><li>创建数据 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy43ff2569-a793-435c-98fb-d9378f53e3dc.jpg" alt="img"></li><li>分析数据，查看结果 <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy01f7b84e-c92c-49d4-98df-b15a87bf9e59.jpg" alt="img"><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudya7688cae-3dda-4c09-a280-91e1d68e05d8.jpg" alt="img"></li><li>查询数据**（keyword类型的字段不会被分词器解析）** <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy18a73b07-b8cf-49f1-9a60-a6960b291582.jpg" alt="img"><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyf76c8d1b-d4c2-486c-bdcd-475a5a296a19.jpg" alt="img"></li></ol><h5 id="多个值匹配精确查询" tabindex="-1"><a class="header-anchor" href="#多个值匹配精确查询"><span>多个值匹配精确查询：</span></a></h5><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy2b25f630-2ef0-43b7-bdf8-be99a9e26a95.jpg" alt="img"></p><h5 id="高亮查询" tabindex="-1"><a class="header-anchor" href="#高亮查询"><span>高亮查询：</span></a></h5><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudybf2b3be8-0081-4734-b9c3-ace886405ef9.jpg" alt="img"></p><h2 id="九、集成springboot" tabindex="-1"><a class="header-anchor" href="#九、集成springboot"><span>九、集成SpringBoot</span></a></h2><blockquote><p>找官方文档 （7.6.x）</p></blockquote><p>https://www.elastic.co/guide/index.html <img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy0fe4501f-e1e0-4de6-b9b7-1ee8dc027e99.jpg" alt="img"><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudyde815c4b-6e0f-42e6-ad76-bb2c50e8e4a2.jpg" alt="img"></p><h3 id="_1-找到原生的依赖。" tabindex="-1"><a class="header-anchor" href="#_1-找到原生的依赖。"><span>1. 找到原生的依赖。</span></a></h3><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticsearch-rest-high-level-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>7.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-找对象。" tabindex="-1"><a class="header-anchor" href="#_2-找对象。"><span>2. 找对象。</span></a></h3><p><img src="https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/kuangstudy330ec604-a75d-4ea5-ba2e-099add19cd37.jpg" alt="img"></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">RestHighLevelClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestHighLevelClient</span><span class="token punctuation">(</span>        
    <span class="token class-name">RestClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>                
        <span class="token keyword">new</span> <span class="token class-name">HttpHost</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token number">9200</span><span class="token punctuation">,</span> <span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                
        <span class="token keyword">new</span> <span class="token class-name">HttpHost</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token number">9201</span><span class="token punctuation">,</span> <span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
   	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-分析这个类的方法。" tabindex="-1"><a class="header-anchor" href="#_3-分析这个类的方法。"><span>3. 分析这个类的方法。</span></a></h3><p>类中的方法api</p><h2 id="十、集成springboot代码实现-7-6-1" tabindex="-1"><a class="header-anchor" href="#十、集成springboot代码实现-7-6-1"><span>十、集成SpringBoot代码实现（7.6.1）</span></a></h2><h3 id="_1-导入依赖" tabindex="-1"><a class="header-anchor" href="#_1-导入依赖"><span>1.导入依赖</span></a></h3><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--processor--&gt;</span>        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        
<span class="token comment">&lt;!--lombok--&gt;</span>        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        
<span class="token comment">&lt;!--整合es--&gt;</span>        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>       
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>       
<span class="token comment">&lt;!--es--&gt;</span>        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticsearch-rest-high-level-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>7.6.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>       
<span class="token comment">&lt;!--fastjson--&gt;</span>        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-配置elasticsearch" tabindex="-1"><a class="header-anchor" href="#_2-配置elasticsearch"><span>2.配置ElasticSearch</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpHost</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestHighLevelClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Configurationpublic</span> 
<span class="token keyword">class</span> <span class="token class-name">ElasticSearchClientConfig</span> <span class="token punctuation">{</span>    
    <span class="token annotation punctuation">@Bean</span>    
    <span class="token keyword">public</span> <span class="token class-name">RestHighLevelClient</span> <span class="token function">restHighLevelClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        
        <span class="token class-name">RestHighLevelClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestHighLevelClient</span><span class="token punctuation">(</span>                
            <span class="token class-name">RestClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>                        
                <span class="token keyword">new</span> <span class="token class-name">HttpHost</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token number">9200</span><span class="token punctuation">,</span> <span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
        <span class="token keyword">return</span> client<span class="token punctuation">;</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-导入bean后-使用。" tabindex="-1"><a class="header-anchor" href="#_3-导入bean后-使用。"><span>3.导入bean后，使用。</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTestclass</span> 
<span class="token class-name">ElasticSearchApiApplicationTests</span> <span class="token punctuation">{</span>    
    <span class="token annotation punctuation">@Autowired</span>    
    <span class="token keyword">private</span> <span class="token class-name">RestHighLevelClient</span> restHighLevelClient<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="十一、具体的api测试" tabindex="-1"><a class="header-anchor" href="#十一、具体的api测试"><span>十一、具体的api测试</span></a></h2><h3 id="_1、创建索引" tabindex="-1"><a class="header-anchor" href="#_1、创建索引"><span>1、创建索引</span></a></h3><div class="language-Java line-numbers-mode" data-ext="Java" data-title="Java"><pre class="language-Java"><code>// 测试索引的创建    
@Test    
void testCreateIndex() throws IOException {        
	// 1.创建索引请求        
	CreateIndexRequest request = new CreateIndexRequest(&quot;kuang_index&quot;);        
	// 2.执行创建请求，请求后获得响应createIndexResponse       
	CreateIndexResponse createIndexResponse = restHighLevelClient.indices().create(request,RequestOptions.DEFAULT);        
	System.out.println(createIndexResponse);    
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、判断索引是否存在" tabindex="-1"><a class="header-anchor" href="#_2、判断索引是否存在"><span>2、判断索引是否存在</span></a></h3><div class="language-Java line-numbers-mode" data-ext="Java" data-title="Java"><pre class="language-Java"><code>// 测试获取索引，只能判断其是否存在    
@Test    
	void testExistIndex() throws IOException {        
	// 1.创建索引请求        
	GetIndexRequest request = new GetIndexRequest(&quot;kuang_index&quot;);        
	// 2.获取索引，是否存在        
	boolean exists = restHighLevelClient.indices().exists(request, RequestOptions.DEFAULT);        
	System.out.println(exists);    
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、删除索引" tabindex="-1"><a class="header-anchor" href="#_3、删除索引"><span>3、删除索引</span></a></h3><div class="language-Java line-numbers-mode" data-ext="Java" data-title="Java"><pre class="language-Java"><code>// 测试删除索引    
@Test    
	void testDeleteIndex() throws IOException {        
	// 1.创建删除索引请求       
	DeleteIndexRequest request = new DeleteIndexRequest(&quot;kuang_index&quot;);       
	// 2.获取删除状态        
	AcknowledgedResponse delete = restHighLevelClient.indices().delete(request, RequestOptions.DEFAULT);
    System.out.println(delete.isAcknowledged());    
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、添加文档" tabindex="-1"><a class="header-anchor" href="#_4、添加文档"><span>4、添加文档</span></a></h3><div class="language-Java line-numbers-mode" data-ext="Java" data-title="Java"><pre class="language-Java"><code>// 测试添加文档    
@Test    
void testAddDocument() throws IOException {        
    // 1.创建对象       
    User user = new User(&quot;狂神说&quot;,3);        
    // 2.创建请求        
    IndexRequest request = new IndexRequest(&quot;kuang_index&quot;);     
    // 3.规则 put /kuang_index/_doc/1       
    request.id(&quot;1&quot;);       
    request.timeout(TimeValue.timeValueSeconds(1));// 或者 request.timeout(&quot;1s&quot;);        
    // 4.把数据放入请求 json      
    IndexRequest source = request.source(JSON.toJSONString(user), XContentType.JSON);    
    // 5.客户端发送请求，获取响应结果       
    IndexResponse indexResponse = restHighLevelClient.index(request, RequestOptions.DEFAULT); 
    System.out.println(indexResponse.toString());// 结果的json       
    System.out.println(indexResponse.status());// 对应我们命令返回的状态 created    
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、判断文档是否存在" tabindex="-1"><a class="header-anchor" href="#_5、判断文档是否存在"><span>5、判断文档是否存在</span></a></h3><div class="language-Java line-numbers-mode" data-ext="Java" data-title="Java"><pre class="language-Java"><code>// 获取文档信息，判断是否存在 get /index/_doc/1   
@Test    
void testIsExists() throws IOException {      
    GetRequest getRequest = new GetRequest(&quot;kuang_index&quot;, &quot;1&quot;);        // 不获取返回_source的上下文了   
    getRequest.fetchSourceContext(new FetchSourceContext(false));       
    getRequest.storedFields(&quot;_none_&quot;);        
    boolean exists = restHighLevelClient.exists(getRequest, RequestOptions.DEFAULT);        
    System.out.println(exists);    
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、获取文档的信息" tabindex="-1"><a class="header-anchor" href="#_6、获取文档的信息"><span>6、获取文档的信息</span></a></h3><div class="language-Java line-numbers-mode" data-ext="Java" data-title="Java"><pre class="language-Java"><code>    // 获取文档的信息    
@Test    
void testGetDocument() throws IOException {       
    GetRequest getRequest = new GetRequest(&quot;kuang_index&quot;, &quot;1&quot;);   
    GetResponse getResponse = restHighLevelClient.get(getRequest, RequestOptions.DEFAULT);  
    System.out.println(getResponse.getSourceAsString());// 打印文档的内容        
    System.out.println(getResponse);// 返回的全部内容和密令一样   
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7、更新文档的信息" tabindex="-1"><a class="header-anchor" href="#_7、更新文档的信息"><span>7、更新文档的信息</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// 更新文档的信息    </span>
<span class="token annotation punctuation">@Test</span>   
	<span class="token keyword">void</span> <span class="token function">testUpdateDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        
	<span class="token class-name">UpdateRequest</span> updateRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UpdateRequest</span><span class="token punctuation">(</span><span class="token string">&quot;kuang_index&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       
    updateRequest<span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token string">&quot;1s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
	<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;狂神说Java&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      
    updateRequest<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">XContentType</span><span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
	<span class="token class-name">UpdateResponse</span> update <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>updateRequest<span class="token punctuation">,</span><span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>update<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8、删除文档信息" tabindex="-1"><a class="header-anchor" href="#_8、删除文档信息"><span>8、删除文档信息</span></a></h3><div class="language-Java line-numbers-mode" data-ext="Java" data-title="Java"><pre class="language-Java"><code>// 删除文档记录    
@Test    
void testDeleteRequest() throws IOException {        
	DeleteRequest deleteRequest = new DeleteRequest(&quot;kuang_index&quot;,&quot;1&quot;);       
    deleteRequest.timeout(&quot;1s&quot;);        
	DeleteResponse deleteResponse = restHighLevelClient.delete(deleteRequest,RequestOptions.DEFAULT);
    System.out.println(deleteResponse.status());    
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9、批量插入数据" tabindex="-1"><a class="header-anchor" href="#_9、批量插入数据"><span>9、批量插入数据</span></a></h3><p>特殊的，真实的项目一般都会批量插入数据。</p><div class="language-Java line-numbers-mode" data-ext="Java" data-title="Java"><pre class="language-Java"><code>// 特殊的，真实的项目一般都会批量插入数据    
@Test    
void testBulkRequest() throws IOException {       
    BulkRequest bulkRequest = new BulkRequest();      
    bulkRequest.timeout(&quot;1s&quot;);        
    ArrayList&lt;User&gt; users = new ArrayList&lt;&gt;();     
    users.add(new User(&quot;kuangshen1&quot;,3));       
    users.add(new User(&quot;kuangshen2&quot;,3));       
    users.add(new User(&quot;kuangshen3&quot;,3));       
    users.add(new User(&quot;qinjiang1&quot;,3));        
    users.add(new User(&quot;qinjiang1&quot;,3));       
    users.add(new User(&quot;qinjiang1&quot;,3));       
    for (int i = 0; i &lt; users.size(); i++) {            
        bulkRequest.add(new IndexRequest(&quot;kuang_index&quot;)                    
                        .id(&quot;&quot;+(i+1))// 不设置id，则会生成默认id                 
                        .source(JSON.toJSONString(users.get(i)),XContentType.JSON));       
    } 
    BulkResponse bulkResponse = restHighLevelClient.bulk(bulkRequest, RequestOptions.DEFAULT);
    System.out.println(bulkResponse.hasFailures());// 是否失败，返回false代表成功    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10、查询" tabindex="-1"><a class="header-anchor" href="#_10、查询"><span>10、查询</span></a></h3><div class="language-Java line-numbers-mode" data-ext="Java" data-title="Java"><pre class="language-Java"><code>// 查询    
// SearchRequest 搜索请求    
// SearchSourceBuilder 条件构造    
// HighlightBuilder 构建高亮    
// TermQueryBuilder精确查询    
// MatchALLQueryBuilder    
// xxx QueryBuilder 对应我们刚才看到的命令！    
@Test    
void testSearch() throws IOException {        
    // 创建请求        
    SearchRequest searchRequest = new SearchRequest(&quot;kuang_index&quot;);       
    // 构建搜索条件       
    SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();      
    // 查询条件，我们可以使用 QueryBuilders 工具来实现        
    TermQueryBuilder termQueryBuilder = QueryBuilders.termQuery(&quot;name&quot;, &quot;qinjiang1&quot;);// 精确        
    //MatchAllQueryBuilder matchAllQueryBuilder = QueryBuilders.matchAllQuery();// 匹配所有     
    sourceBuilder.query(termQueryBuilder);       
    sourceBuilder.timeout(new TimeValue(60, TimeUnit.SECONDS));      
    searchRequest.source(sourceBuilder);        
    SearchResponse searchResponse = restHighLevelClient.search(searchRequest, RequestOptions.DEFAULT);   
    System.out.println(JSON.toJSONString(searchResponse.getHits()));        
    System.out.println(&quot;=============&quot;);        
    for (SearchHit hit : searchResponse.getHits().getHits()) {            
        System.out.println(hit.getSourceAsMap());        
    }    
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 9479421@qq.com">wqby</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav" aria-label="page navigation"><p class="inner"><span class="prev"><a class="route-link" href="/view/note/%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker%E9%83%A8%E7%BD%B2%E5%89%8D%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE.html" aria-label="Docker部署前后端"><!--[--><!--]--> Docker部署前后端 <!--[--><!--]--></a></span><span class="next"><a class="route-link" href="/view/note/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" aria-label="Redis学习笔记"><!--[--><!--]--> Redis学习笔记 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-koVjN3rn.js" defer></script>
  </body>
</html>
