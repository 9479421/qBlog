import comp from "F:/qBlogPlus/docs/.vuepress/.temp/pages/blog/NDK开发so调用so.html.vue"
const data = JSON.parse("{\"path\":\"/blog/NDK%E5%BC%80%E5%8F%91so%E8%B0%83%E7%94%A8so.html\",\"title\":\"NDK开发so动态调用so\",\"lang\":\"en-US\",\"frontmatter\":{\"title\":\"NDK开发so动态调用so\",\"date\":\"2024-03-04T00:00:00.000Z\",\"category\":[\"History\"],\"tag\":[\"Android\",\"C++\"]},\"headers\":[],\"git\":{\"updatedTime\":1710776868000,\"contributors\":[{\"name\":\"wqby\",\"email\":\"9479421@qq.com\",\"commits\":1}]},\"filePathRelative\":\"blog/NDK开发so调用so.md\",\"excerpt\":\"\\n<p>创建一个新的cpp，并且配置so绑定此cpp，这便是要被调用的so</p>\\n<p><img src=\\\"https://wqby-1304194722.cos.ap-nanjing.myqcloud.com/img/image-20240304142825887.png\\\" alt=\\\"image-20240304142825887\\\"></p>\\n<p>在MainActivity.java中声明public native String stringFromOtherSo(String path)，并在native-lib.cpp中实现该方法。</p>\\n<div class=\\\"language-c\\\" data-ext=\\\"c\\\" data-title=\\\"c\\\"><pre class=\\\"language-c\\\"><code><span class=\\\"token keyword\\\">extern</span> <span class=\\\"token string\\\">\\\"C\\\"</span>\\nJNIEXPORT jstring JNICALL\\n<span class=\\\"token function\\\">Java_vip_wqby_souseso_MainActivity_stringFromOtherSo</span><span class=\\\"token punctuation\\\">(</span>JNIEnv <span class=\\\"token operator\\\">*</span>env<span class=\\\"token punctuation\\\">,</span> jobject thiz<span class=\\\"token punctuation\\\">,</span>\\n                                                     jstring path<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> <span class=\\\"token keyword\\\">char</span><span class=\\\"token operator\\\">*</span> cPath <span class=\\\"token operator\\\">=</span> env<span class=\\\"token operator\\\">-&gt;</span><span class=\\\"token function\\\">GetStringUTFChars</span><span class=\\\"token punctuation\\\">(</span>path<span class=\\\"token punctuation\\\">,</span> nullptr<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">void</span> <span class=\\\"token operator\\\">*</span>soinfo <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">dlopen</span><span class=\\\"token punctuation\\\">(</span>cPath<span class=\\\"token punctuation\\\">,</span>RTLD_NOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    std<span class=\\\"token operator\\\">::</span><span class=\\\"token function\\\">string</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">*</span>ref<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token operator\\\">=</span> reinterpret_cast<span class=\\\"token operator\\\">&lt;</span>std<span class=\\\"token operator\\\">::</span><span class=\\\"token function\\\">string</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">*</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">dlsym</span><span class=\\\"token punctuation\\\">(</span>soinfo<span class=\\\"token punctuation\\\">,</span><span class=\\\"token string\\\">\\\"getStr\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">dlclose</span><span class=\\\"token punctuation\\\">(</span>soinfo<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">return</span> env<span class=\\\"token operator\\\">-&gt;</span><span class=\\\"token function\\\">NewStringUTF</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">ref</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">c_str</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre></div>\"}")
export { comp, data }
